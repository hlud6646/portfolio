{% extends "layout.html" %}
{% set active_page = "three_body" %}


{% block title %}
Three-Body Demo
{% endblock %}


{% block visualisation %}
	<img src='{{ url_for("stream", title="three_body") }}'>
{% endblock %}


{% block subtitle %}
	Three Body Demo with Random Initial Locations
{% endblock %}


{% block source %}
	<a href="https://github.com/hlud6646/three_body">https://github.com/hlud6646/three_body</a>
{% endblock %}


{% block words %}
	I found that the inverse of the distance between two masses, rather than that distance squared made a more interesting image.
	So this is not stricly physical but if you watch for long enough you can see some almost stable orbits appear.
	It's also cool that since the masses begin at rest (and within the visual frame), their center of mass is at a fixed point within the frame.
	That mean's that no matter how far they are flung out of the frame they will always make it back to entertain me.

	What I learnt here was custom data types in numpy, which are arrays that have really clean access like a dictionary:

	
	<!--  CHECK THAT THIS IS THE MOSE RECENT CODE -->
	<pre>
		<code>	def new_state():
		state = np.empty( 3, dtype=[('location', float, 2),
					    ('velocity', float, 2),
					    ('mass', 	 float, 1),
					    ('color',	 float, 3)])
		state['location'] = np.random.uniform(.2, .8, (3, 2))
		state['velocity'] = np.zeros((3, 2))
		state['mass'] 	  = np.ones(3)
		state['color']    = np.random.uniform(.2, .9, (3, 3))</code>
	</pre>

	The rest is really just vector algebra:

	<pre>
		<code>def _force(a, b):
	""" Return the 'gravitational' force that b exerts on a."""
	G = 10e-5
	v = b['location'] - a['location']
	d = sum(v*v)**.5
	return (G*a['mass']*b['mass']/d**2)*v

def update(state):
	DT = 10e-3
	a, b, c = state
	q, w, e = [ _force(a,b), _force(a,c), _force(b,c) ]
	net_force = np.array([ q+w, e-q, -e-w ])
	state['velocity'] += DT*net_force
	state['location'] += DT*state['velocity']</code>
	</pre>  

It would be fun to pass the chosen potential (here 1/d) as an argument to the _force function to see what 
weird/time dependent potentials look like in action.


{% endblock %}